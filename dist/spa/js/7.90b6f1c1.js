(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"013f":function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("q-page",{staticClass:"page page--login content flex flex-center"},[o("q-page-container",[o("div",{staticClass:"login-form"},[o("img",{attrs:{src:t("9b19"),alt:"logo"}}),o("form",{on:{submit:function(s){return s.preventDefault(),e.login(s)}}},[o("div",[o("label",{attrs:{for:"email"}},[e._v("–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",id:"email",required:""},domProps:{value:e.email},on:{input:function(s){s.target.composing||(e.email=s.target.value)}}})]),o("div",[o("label",{attrs:{for:"pass"}},[e._v("–ü–∞—Ä–æ–ª—å:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{type:"password",id:"pass",required:""},domProps:{value:e.pass},on:{input:function(s){s.target.composing||(e.pass=s.target.value)}}})]),o("div",{staticClass:"remember-me-container"},[o("label",{staticClass:"remember-me-label"},[o("div",{staticClass:"custom-checkbox-wrapper"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.rememberMe,expression:"rememberMe"}],staticClass:"remember-me-checkbox",attrs:{type:"checkbox",id:"remember-checkbox"},domProps:{checked:Array.isArray(e.rememberMe)?e._i(e.rememberMe,null)>-1:e.rememberMe},on:{change:function(s){var t=e.rememberMe,o=s.target,r=!!o.checked;if(Array.isArray(t)){var a=null,i=e._i(t,a);o.checked?i<0&&(e.rememberMe=t.concat([a])):i>-1&&(e.rememberMe=t.slice(0,i).concat(t.slice(i+1)))}else e.rememberMe=r}}}),o("span",{staticClass:"custom-checkbox"})]),o("span",{staticClass:"remember-me-text"},[e._v("–ó–∞–ø–∞–º'—è—Ç–∞—Ç–∏ –º–µ–Ω–µ")])])]),e.showError?o("div",{staticClass:"error-msg"},[o("p",[e._v(e._s(e.errorMsg))])]):e._e(),e.showSuccess?o("div",{staticClass:"success-msg"},[o("p",[e._v("‚úì –í—Ö—ñ–¥ –≤–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ!")])]):e._e(),o("button",{attrs:{type:"submit"}},[e._v("–£–≤—ñ–π—Ç–∏")])])])])],1)},r=[],a={name:"Login",data:function(){return{email:"",pass:"",rememberMe:!0,isUser:!1,showError:!1,showSuccess:!1,errorMsg:"–©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫! –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–≤–µ–¥–µ–Ω—ñ –í–∞–º–∏ –¥–∞–Ω—ñ"}},created:function(){var e=this;console.log("üîç Login page created");var s=this.$q.localStorage.getItem("rememberMe"),t=this.$q.localStorage.getItem("savedAuth");if(s&&t&&t.accessToken)return console.log("‚úÖ Found saved session - auto-login"),this.$store.commit("login",{accessToken:t.accessToken,firstName:t.firstName,lastName:t.lastName,mail:t.mail,phone:t.phone}),void this.$router.push({path:"/entry"});var o=this.$q.localStorage.getItem("userData");s&&o&&o.login&&o.pass?(this.email=o.login,this.pass=o.pass,this.rememberMe=!0,console.log("‚úì Loaded saved credentials")):(this.email="romanchupa1@gmail.com",this.pass="sJAk969beho_",console.log("üìù Using default credentials")),this.$store.watch((function(e,s){return s.getAccessToken}),(function(s,t){s&&e.$router.push({path:"/entry"})}))},mounted:function(){this.$store.dispatch("fetchingData",{isFetching:!1}),this.$store.getters.getAccessToken&&(this.showError=!1,this.$router.push({path:"/entry"})),window.cordova?document.addEventListener("deviceready",(function(){console.log("‚úÖ Cordova deviceready event fired!"),console.log("üì± Cordova plugins available:",window.cordova.plugin)}),!1):console.log("‚ö†Ô∏è Running in browser mode (no Cordova)")},methods:{login:function(){var e=this;console.log("üîê Login button clicked"),this.showError=!1,this.showSuccess=!1,this.rememberMe?(this.$q.localStorage.set("rememberMe",!0),console.log("‚úì Remember me enabled")):(this.$q.localStorage.remove("rememberMe"),this.$q.localStorage.remove("userData"),this.$q.localStorage.remove("savedAuth"),console.log("‚úó Remember me disabled - all saved data cleared")),this.$store.dispatch("fetchingData",{isFetching:!0}),this.$store.dispatch("login",{login:this.email,password:this.pass}).then((function(){var s=function(){if(e.$store.getters.getAccessToken){if(console.log("‚úÖ Login successful!"),e.showError=!1,e.showSuccess=!0,e.rememberMe){e.$q.localStorage.set("userData",{login:e.email,pass:e.pass});var s=e.$store.getters.getUser;e.$q.localStorage.set("savedAuth",{accessToken:e.$store.getters.getAccessToken,firstName:s.firstName,lastName:s.lastName,mail:s.mail,phone:s.phone}),console.log("‚úì Credentials and auth state saved for next time")}setTimeout((function(){e.$store.dispatch("fetchingData",{isFetching:!1}),e.$router.push({path:"/entry"})}),300)}else console.log("‚ö†Ô∏è No token yet, checking again...")};setTimeout(s,100),setTimeout(s,500),setTimeout((function(){if(!e.$store.getters.getAccessToken){console.error("‚ùå Login failed - no token received");var s=e.$store.getters.getError;s&&s.status&&(403===s.status?e.errorMsg="–î–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ (403). –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.":401===s.status?e.errorMsg="–ù–µ–≤—ñ—Ä–Ω–∏–π –ª–æ–≥—ñ–Ω –∞–±–æ –ø–∞—Ä–æ–ª—å":s.data&&s.data.error_description?e.errorMsg=s.data.error_description:e.errorMsg="–ü–æ–º–∏–ª–∫–∞ ".concat(s.status,": ").concat(s.message),console.error("Error details:",s)),e.showError=!0,e.showSuccess=!1,e.$store.dispatch("fetchingData",{isFetching:!1})}}),1e3)})).catch((function(s){console.error("‚ùå Login promise rejected:",s),e.showError=!0,e.showSuccess=!1,e.$store.dispatch("fetchingData",{isFetching:!1})}))}}},i=a,n=(t("50ba"),t("2877")),c=Object(n["a"])(i,o,r,!1,null,null,null);s["default"]=c.exports},"19bf":function(e,s,t){},"50ba":function(e,s,t){"use strict";var o=t("19bf"),r=t.n(o);r.a},"9b19":function(e,s,t){e.exports=t.p+"img/logo.6504ada5.svg"}}]);