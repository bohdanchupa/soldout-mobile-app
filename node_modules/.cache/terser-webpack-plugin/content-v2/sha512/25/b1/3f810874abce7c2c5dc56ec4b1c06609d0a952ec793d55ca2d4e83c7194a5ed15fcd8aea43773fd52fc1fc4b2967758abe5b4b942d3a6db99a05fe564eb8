{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"d158199e\"],{\"44a4\":function(t,e,a){\"use strict\";var i=a(\"5a71\"),r=a.n(i);r.a},\"5a71\":function(t,e,a){},\"8fe8\":function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"q-page\",{key:\"page-key-\"+t.pageKey,staticClass:\"page page--list-of-events content\"},[a(\"q-header\",{staticClass:\"header\"},[a(\"router-link\",{attrs:{to:\"/entry\"}},[t._v(\"\\n      \"+t._s(t.routeTitle)+\"\\n    \")]),t.showCalendarFilter?a(\"div\",{staticClass:\"date-filter\",on:{click:function(e){e.preventDefault(),t.showCalendarFilterPopup=!0}}},[t.dateFromFilter&&t.dateToFilter?a(\"span\",[t._v(\"\\n        \"+t._s(t.dateFromFilter)+\" - \"+t._s(t.dateToFilter)+\"\\n      \")]):t._e(),a(\"a\",{staticClass:\"callendar-btn\",attrs:{href:\"#\"}})]):t._e()],1),t.showCalendarFilterPopup?a(\"div\",{staticClass:\"calendar-filter-popup\"},[a(\"div\",{staticClass:\"calendar-filter-popup__window\"},[a(\"i\",{staticClass:\"close-calendar-filer-popup\",on:{click:function(e){e.preventDefault(),t.showCalendarFilterPopup=!1}}}),a(\"h3\",[t._v(\"Оберить проміжок:\")]),a(\"div\",[a(\"label\",{attrs:{for:\"date-from\"}},[t._v(\"Від: \"),a(\"span\",[t._v(t._s(t.dateFromFilter||\"___-__-__\"))])]),a(\"label\",{attrs:{for:\"date-to\"}},[t._v(\"До: \"),a(\"span\",[t._v(t._s(t.dateToFilter||\"___-__-__\"))])])]),a(\"button\",{on:{click:function(e){return e.preventDefault(),t.submitCalendarFilter(e)}}},[t._v(\"Підтвердити\")]),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.dateFromFilter,expression:\"dateFromFilter\"}],attrs:{type:\"date\",id:\"date-from\"},domProps:{value:t.dateFromFilter},on:{input:function(e){e.target.composing||(t.dateFromFilter=e.target.value)}}}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.dateToFilter,expression:\"dateToFilter\"}],attrs:{type:\"date\",id:\"date-to\"},domProps:{value:t.dateToFilter},on:{input:function(e){e.target.composing||(t.dateToFilter=e.target.value)}}})])]):t._e(),a(\"div\",{staticClass:\"container\"},[a(\"form\",{staticClass:\"search\"},[a(\"div\",{staticClass:\"input-wrapper\"},[a(\"i\",{staticClass:\"search-icon\"}),a(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.filterString,expression:\"filterString\"}],attrs:{type:\"text\",placeholder:\"Введіть подію, яку ви шукаєте…\"},domProps:{value:t.filterString},on:{input:function(e){e.target.composing||(t.filterString=e.target.value)}}}),a(\"a\",{staticClass:\"reset-btn\",attrs:{href:\"#\"},on:{click:function(e){return e.preventDefault(),t.resetFilterField(e)}}})]),a(\"button\",{on:{click:function(t){return t.preventDefault(),(!1)(t)}}},[t._v(\"Знайти\")])]),a(\"ul\",{staticClass:\"events-list\"},t._l(t.filteredEvents,(function(e,i){return a(\"li\",{key:i},[a(\"router-link\",{staticClass:\"event-teaser\",attrs:{to:\"/event/\"+e.id+\"/\"+e.title+\"/\"+e.city+\"/\"+e.concertHall+\"/\"+e.date+\"/\"+e.time+\"/\"+e.creator+\"/\"+t.isGeneral+\"/\"+t.isToday}},[a(\"i\",{staticClass:\"link-icon\"}),a(\"div\",{staticClass:\"thumbnail-and-inf\"},[a(\"div\",{staticClass:\"thumbnail\",style:{\"background-image\":\"url(\"+e.thumbnail+\")\"}}),a(\"div\",{staticClass:\"inf\"},[a(\"h5\",[t._v(\"Організатор: \"),a(\"span\",[t._v(t._s(e.creator))])]),a(\"h2\",[t._v(t._s(e.title))]),a(\"p\",[t._v(t._s(e.city)+\" \"+t._s(e.concertHall))]),a(\"p\",[t._v(t._s(e.date)+\" \"+t._s(e.time))])])]),a(\"div\",{staticClass:\"divider\"}),a(\"div\",{staticClass:\"total\"},[a(\"p\",[a(\"span\",[t._v(t._s(e.orders))]),t._v(\" Замовлення\")]),a(\"p\",[a(\"span\",[t._v(t._s(e.tickets))]),t._v(\" Квитки\")]),a(\"p\",[t._v(\"Сума \"),a(\"span\",[t._v(t._s(e.total))]),t._v(\" грн\")])])])],1)})),0)])],1)},r=[],s=(a(\"3b2b\"),a(\"28a5\"),a(\"9191\")),n={name:\"ListOfEvents\",data:function(){return{filterString:\"\",events:[],showCalendarFilter:!1,showCalendarFilterPopup:!1,dateFromFilter:null,dateToFilter:null,pageKey:0}},mounted:function(){this.gettingData()},computed:{routeTitle:function(){var t=\"\";switch(this.$route.params.listId){case\"today\":t=\"Події за сьогодні\";break;case\"general\":t=\"Загальні\";break;case\"archive\":t=\"Архів\";break}return t},routeInf:function(){var t=this,e=!1;if(this.$route.params.eventId){var a=this.events.filter((function(e){return+e.id===+t.$route.params.eventId}))[0];e={place:a.city+\" \"+a.concertHall,date:a.date+\" \"+a.time,creator:a.creator}}return e},filteredEvents:function(){var t=this.events;if(this.filterString)for(var e=this.filterString.split(\" \"),a=0;a<e.length;a++)if(e[a].length>0){var i=new RegExp(e[a],\"gi\");t=[];for(var r=0;r<this.events.length;r++){var s=\"\".concat(this.events[r].creator).concat(this.events[r].title).concat(this.events[r].city).concat(this.events[r].concertHall).concat(this.events[r].date).concat(this.events[r].time).concat(this.events[r].tickets).concat(this.events[r].orders).concat(this.events[r].total);i.test(s)&&t.push(this.events[r])}}return t},isGeneral:function(){var t=!1;return\"general\"===this.$route.params.listId&&(t=!0),t},isToday:function(){var t=!1;return\"today\"===this.$route.params.listId&&(t=!0),t}},methods:{gettingData:function(){var t=this;this.events=[];var e=new Date,a=e.getDate()<10?\"0\"+e.getDate():e.getDate(),i=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,r=s[\"h\"],n={dateFrom:e.getFullYear()+\"-\"+i+\"-\"+a+\"T00:00:00\",dateTo:e.getFullYear()+\"-\"+i+\"-\"+a+\"T23:59:59\"};\"archive\"===this.$route.params.listId&&(r=s[\"i\"],this.showCalendarFilter=!0),\"today\"===this.$route.params.listId&&(r=s[\"j\"]),\"general\"===this.$route.params.listId&&(n=this.dateFromFilter&&this.dateToFilter?{dateFrom:this.dateFromFilter+\"T00:00:00\",dateTo:this.dateToFilter+\"T23:59:59\"}:null,this.showCalendarFilter=!0),this.$store.dispatch(\"fetchingData\",{isFetching:!0}),this.$axios({methods:\"get\",url:r,params:n,headers:{Authorization:\"Bearer  \"+this.$store.getters.getAccessToken}}).then((function(e){for(var a=0;a<e.data.length;a++){var i=new Date(e.data[a].beginDate),r=i.getDate()<10?\"0\"+i.getDate():i.getDate(),n=i.getMonth()+1<10?\"0\"+i.getMonth():i.getMonth(),o=i.getHours()<10?\"0\"+i.getHours():i.getHours(),l=i.getMinutes()<10?\"0\"+i.getMinutes():i.getMinutes();t.events.push({id:e.data[a].id,creator:e.data[a].organizator.firstName+\" \"+e.data[a].organizator.lastName,thumbnail:s[\"o\"]+\"/image-service/image-service/file/\"+e.data[a].mainImageSmall.path,title:e.data[a].eventName.valueUA,city:e.data[a].cityName.valueUA,concertHall:e.data[a].hallName.valueUA,date:\"\".concat(r,\".\").concat(n,\".\").concat(i.getFullYear()),time:\"\".concat(o,\":\").concat(l),orders:e.data[a].ordersCount,tickets:e.data[a].ticketsCount,total:e.data[a].moneysSum||0})}t.$store.dispatch(\"fetchingData\",{isFetching:!1})}))},resetFilterField:function(){this.filterString=\"\"},submitCalendarFilter:function(){this.pageKey+=1,this.showCalendarFilterPopup=!1,this.gettingData()}}},o=n,l=(a(\"44a4\"),a(\"2877\")),c=Object(l[\"a\"])(o,i,r,!1,null,null,null);e[\"default\"]=c.exports}}]);","extractedComments":[]}