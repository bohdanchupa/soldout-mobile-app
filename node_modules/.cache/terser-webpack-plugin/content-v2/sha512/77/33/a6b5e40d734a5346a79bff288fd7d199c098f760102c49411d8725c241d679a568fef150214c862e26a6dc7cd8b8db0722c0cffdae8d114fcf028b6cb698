{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"2656a22e\"],{\"2ab4\":function(t,e,a){},6463:function(t,e,a){\"use strict\";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"q-page\",{staticClass:\"page page--today content flex flex-center\"},[s(\"div\",[s(\"img\",{staticClass:\"logo\",attrs:{src:a(\"9b19\"),alt:\"logo\"}}),s(\"div\",{staticClass:\"date\"},[s(\"h4\",[t._v(\"Статистика\")]),s(\"span\",[t._v(t._s(t.date))])]),t.details?s(\"total-soulds\",{attrs:{details:t.details}}):t._e(),t.showCharts?s(\"div\",{staticClass:\"charts-container\"},[s(\"sine-charts\",{staticClass:\"charts\",attrs:{charts:t.charts},on:{\"marker-click\":t.onMarkerClick}})],1):t._e(),t.showDetails&&t.detailsForAnotherDay?s(\"total-soulds\",{style:{\"z-index\":0},attrs:{details:t.detailsForAnotherDay,showDetail:!0}}):t._e(),s(\"div\",{staticClass:\"today-total-inf\"},[s(\"div\",[s(\"h2\",[t._v(t._s(t.allOrderCount))]),s(\"span\",{staticClass:\"divider-3\"}),s(\"h4\",[t._v(\"Замовлень\")])]),s(\"div\",[s(\"h2\",[t._v(t._s(t.allTicketCount))]),s(\"span\",{staticClass:\"divider-4\"}),s(\"h4\",[t._v(\"Квиктів\")])])])],1)])},o=[],n=(a(\"6b54\"),a(\"06db\"),a(\"28a5\"),a(\"9191\")),r={name:\"Today\",components:{\"total-soulds\":function(){return a.e(\"4d005fc2\").then(a.bind(null,\"603b\"))},\"sine-charts\":function(){return a.e(\"0ba84d58\").then(a.bind(null,\"a30c\"))}},data:function(){return{currentDate:this.date,showCharts:!1,allOrderCount:0,allTicketCount:0,details:null,detailsForAnotherDay:null,charts:[{color:\"#12BFFF\",points:[]},{color:\"#66E8CD\",points:[]},{color:\"#FF608E\",points:[]}]}},created:function(){this.showCharts=!1},mounted:function(){var t=this,e=new Date,a=e.getDate()<10?\"0\"+e.getDate():e.getDate(),s=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,o=e.getFullYear()+\"-\"+s+\"-\"+a+\"T00:00:00\",r=e.getFullYear()+\"-\"+s+\"-\"+a+\"T23:59:59\";this.$store.dispatch(\"fetchingData\",{isFetching:!0}),this.$axios({methods:\"get\",url:n[\"m\"],params:{dateFrom:o,dateTo:r},headers:{Authorization:\"Bearer  \"+this.$store.getters.getAccessToken}}).then((function(e){t.details=e.data,t.$axios({methods:\"get\",url:n[\"a\"],params:{dateFrom:o,dateTo:r},headers:{Authorization:\"Bearer  \"+t.$store.getters.getAccessToken}}).then((function(e){t.allOrderCount=e.data.allOrderCount})),t.$axios({methods:\"get\",url:n[\"b\"],params:{dateFrom:o,dateTo:r},headers:{Authorization:\"Bearer  \"+t.$store.getters.getAccessToken}}).then((function(e){t.allTicketCount=e.data.allTicketCount,t.$axios({methods:\"get\",url:n[\"l\"],params:{dateFrom:t.getDateForParams(6)+\"T23:59:59\"},headers:{Authorization:\"Bearer  \"+t.$store.getters.getAccessToken}}).then((function(e){var a=e.data;t.charts[0].points=[],t.charts[1].points=[],t.charts[2].points=[];for(var s=t.allTicketCount,o=t.allOrderCount,n=t.details.allTicketSum,i=0;i<a.length;i++)a[i].soldTickets>s&&(s=a[i].soldTickets),a[i].bookedTickets>o&&(o=a[i].bookedTickets),a[i].soldTicketMoney>n&&(n=a[i].soldTicketMoney);for(var c=0;c<a.length;c++){var l=t.parseTimestamp(a[c].statisticDayTimestamp),h=isNaN(100*a[c].soldTickets/s)?0:100*a[c].soldTickets/s,u=isNaN(100*a[c].bookedTickets/o)?0:100*a[c].bookedTickets/o,d=isNaN(100*a[c].soldTicketMoney/n)?0:100*a[c].soldTicketMoney/n;t.charts[0].points.push({x:l,y:h}),t.charts[1].points.push({x:l,y:u}),t.charts[2].points.push({x:l,y:d}),0===c&&(t.charts[0].points.push({x:l,y:h}),t.charts[1].points.push({x:l,y:u}),t.charts[2].points.push({x:l,y:d}))}var p=t.parseTimestampWithoutOffset(r),g=isNaN(100*t.allTicketCount/s)?0:100*t.allTicketCount/s,T=isNaN(100*t.allOrderCount/o)?0:100*t.allOrderCount/o,m=isNaN(100*t.details.allTicketSum/n)?0:100*t.details.allTicketSum/n;t.charts[0].points.push({x:p,y:g}),t.charts[1].points.push({x:p,y:T}),t.charts[2].points.push({x:p,y:m}),t.charts[0].points.push({x:\"Tomorrow\",y:0}),t.charts[1].points.push({x:\"Tomorrow\",y:0}),t.charts[2].points.push({x:\"Tomorrow\",y:0}),t.showCharts=!0,t.$store.dispatch(\"fetchingData\",{isFetching:!1})}))}))}))},methods:{parseTimestampWithoutOffset:function(t){var e=t.split(\"-\"),a=+\"\".concat(e[2][0]).concat(e[2][1]),s=\"\".concat(e[0][2]).concat(e[0][3]),o=\"\".concat(e[1]),n=a<10?\"0\"+a:a;return\"\".concat(n,\".\").concat(o,\".\").concat(s)},parseTimestamp:function(t){var e=t.split(\"-\"),a=+\"\".concat(e[2][0]).concat(e[2][1])+1,s=\"\".concat(e[0][2]).concat(e[0][3]),o=\"\".concat(e[1]),n=a<10?\"0\"+a:a;return\"\".concat(n,\".\").concat(o,\".\").concat(s)},onMarkerClick:function(t){var e=this,a=\"20\"+t.split(\".\")[2],s=t.split(\".\")[1],o=t.split(\".\")[0];this.$axios({methods:\"get\",url:n[\"m\"],params:{dateFrom:a+\"-\"+s+\"-\"+o+\"T00:00:00\",dateTo:a+\"-\"+s+\"-\"+o+\"T23:59:59\"},headers:{Authorization:\"Bearer  \"+this.$store.getters.getAccessToken}}).then((function(t){e.detailsForAnotherDay=t.data}))},getDate:function(t){var e=new Date,a=new Date(e.setDate(e.getDate()-t)),s=a.getFullYear().toString(),o=\"\"+s[2]+s[3];return\"\".concat(a.getDate(),\".\").concat(a.getMonth()+1,\".\").concat(o)},getDateForParams:function(t){var e=new Date,a=new Date(e.setDate(e.getDate()-t)),s=a.getMonth()+1<10?\"0\"+(a.getMonth()+1):a.getMonth()+1,o=a.getDate()<10?\"0\"+a.getDate():a.getDate();return\"\".concat(a.getFullYear(),\"-\").concat(s,\"-\").concat(o)}},computed:{showDetails:function(){return this.$store.getters.isDetailsShow},date:function(){var t=new Date,e=t.getDate()<10?\"0\"+t.getDate():t.getDate(),a=t.getMonth()+1<10?\"0\"+(t.getMonth()+1):t.getMonth()+1;return\"\".concat(e,\".\").concat(a,\".\").concat(t.getFullYear())}}},i=r,c=(a(\"7472\"),a(\"2877\")),l=Object(c[\"a\"])(i,s,o,!1,null,null,null);e[\"default\"]=l.exports},7472:function(t,e,a){\"use strict\";var s=a(\"2ab4\"),o=a.n(s);o.a},\"9b19\":function(t,e,a){t.exports=a.p+\"img/logo.2f48c192.svg\"}}]);","extractedComments":[]}