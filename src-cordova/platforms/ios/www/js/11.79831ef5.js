(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{7927:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"page page--event-detail content"},[a("q-header",{staticClass:"header"},[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goBack(e)}}},[a("div",[a("span",[t._v(t._s(t.eventCity)+" "+t._s(t.eventConcertHall))])]),t._v("\n      "+t._s(t.eventTitle)+"\n      "),a("div",{staticClass:"flex mt-1"},[a("span",[t._v(t._s(t.eventDate)+". "+t._s(t.eventTime))]),a("span",[t._v("Організатор:: "),a("b",[t._v(t._s(t.eventOrganisator))])])])])]),t.showChart?a("div",{staticClass:"container"},[a("div",{staticClass:"tabs-container"},[a("div",{staticClass:"tab",class:{active:0===t.activeTabIndex},on:{click:function(e){return e.preventDefault(),t.changeActiveTab(0)}}},[a("h4",[t._v("На суму:")]),a("div",{staticClass:"tab-btn"},[a("div",[a("h2",[t._v(t._s(t._f("thousant")(t.currentCurrency))+" грн")]),a("h5",[t._v("з "+t._s(t._f("thousant")(t.totalCurrency))+" грн | "+t._s(t.totalCurrencyPercents)+"% ")])])])]),a("div",{staticClass:"tab text-right",class:{active:1===t.activeTabIndex},on:{click:function(e){return e.preventDefault(),t.changeActiveTab(1)}}},[a("h4",[t._v("Квитків:")]),a("div",{staticClass:"tab-btn"},[a("div",[a("h2",[t._v(t._s(t._f("thousant")(t.currentQuantity))+" штук")]),a("h5",[t._v("з "+t._s(t.totalQuantity)+" квитків | "+t._s(t.totalQuantityPercents)+"% ")])])])])]),a("h1",{staticClass:"text-center"},[t._v("Продано на суму:")]),a("div",{staticClass:"circle-chart"},[0===t.activeTabIndex?a("h2",[a("span",[t._v(t._s(t._f("thousant")(t.currentCurrency)))]),t._v(" грн")]):t._e(),1===t.activeTabIndex?a("h2",[a("span",[t._v(t._s(t._f("thousant")(t.currentQuantity)))]),t._v(" штук")]):t._e(),a("svg",{attrs:{width:"164",height:"164",viewBox:"0 0 164 164"}},[a("defs",[a("linearGradient",{attrs:{id:"linear-1",x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[a("stop",{attrs:{offset:"0%","stop-color":"#FF608E"}}),a("stop",{attrs:{offset:"100%","stop-color":"#E59F93"}})],1),a("linearGradient",{attrs:{id:"linear-2",x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[a("stop",{attrs:{offset:"0%","stop-color":"#9D29E6"}}),a("stop",{attrs:{offset:"100%","stop-color":"#6E2FFF"}})],1),a("linearGradient",{attrs:{id:"linear-3",x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[a("stop",{attrs:{offset:"0%","stop-color":"#3365EB"}}),a("stop",{attrs:{offset:"100%","stop-color":"#26BCFF"}})],1),a("linearGradient",{attrs:{id:"linear-4",x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[a("stop",{attrs:{offset:"0%","stop-color":"#1CFFD0"}}),a("stop",{attrs:{offset:"100%","stop-color":"#1DEEFF"}})],1)],1),t._l(t.detailInf[t.activeTabIndex],(function(e,n){return a("circle",{directives:[{name:"show",rawName:"v-show",value:e.percents>0,expression:"circ.percents > 0"}],key:n,class:[e.id],style:{transform:"rotate("+t.rotateInAngle(e.percents)+"deg)"},attrs:{cx:"82",cy:"82",r:"80",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-dasharray":t.cLength,"stroke-dashoffset":t.cOffset(e.percents)}})}))],2)]),a("div",{staticClass:"chart-legend",class:{"chart-legend--general":t.isGeneral}},[a("ul",[a("li",{staticClass:"cash_register"},[a("h4",[t._v("Каса:")]),a("h3",[a("span",[t._v(t._s(t._f("thousant")(t.detailInf[t.activeTabIndex].cash_register.val)))]),t._v(" "+t._s(0===t.activeTabIndex?"грн":"штук")+"\n            "),a("span",[t._v(t._s(t.detailInf[t.activeTabIndex].cash_register.percents||0)+" %")])])]),a("li",{staticClass:"invitations"},[a("h4",[t._v("Запрошень:")]),a("h3",[a("span",[t._v(t._s(t._f("thousant")(t.detailInf[t.activeTabIndex].invitations.val)))]),t._v(" "+t._s(0===t.activeTabIndex?"грн":"штук")+"\n            "),a("span",[t._v(t._s(t.detailInf[t.activeTabIndex].invitations.percents)+" %")])])]),a("li",{staticClass:"reserved"},[a("h4",[t._v("Заброньовано:")]),a("h3",[a("span",[t._v(t._s(t._f("thousant")(t.detailInf[t.activeTabIndex].reserved.val)))]),t._v(" "+t._s(0===t.activeTabIndex?"грн":"штук")+"\n            "),a("span",[t._v(t._s(t.detailInf[t.activeTabIndex].reserved.percents)+" %")])])])]),a("ul",[a("li",{staticClass:"online"},[a("h4",[t._v("Онлайн:")]),a("h3",[a("span",[t._v(t._s(t._f("thousant")(t.detailInf[t.activeTabIndex].online.val)))]),t._v(" "+t._s(0===t.activeTabIndex?"грн":"штук")+"\n            "),a("span",[t._v(t._s(t.detailInf[t.activeTabIndex].online.percents)+" %")])])]),a("li",{staticClass:"not_sold"},[a("h4",[t._v("Офлайн:")]),a("h3",[a("span",[t._v(t._s(t._f("thousant")(t.detailInf[t.activeTabIndex].offline.val)))]),t._v(" "+t._s(0===t.activeTabIndex?"грн":"штук")+"\n            "),a("span",[t._v(t._s(t.detailInf[t.activeTabIndex].offline.percents)+" %")])])])])]),t.isGeneral?a("div",{staticClass:"sine-chart-container"},[a("h1",{staticClass:"text-center"},[t._v("Детально по днях:")]),a("general-sine-chart",{attrs:{points:t.points},on:{"marker-click":function(e){return t.markerClick(e)}}}),a("div",{staticClass:"detail-window"},[t.showDetails&&t.details?a("total-soulds",{style:{"z-index":0},attrs:{details:t.details,showDetail:!0}}):t._e()],1)],1):t._e(),a("div",[a("div",{staticClass:"panel"},[a("div",{ref:"detail-panel",staticClass:"panel__title",on:{click:function(e){return e.preventDefault(),t.togglePannel("detail-panel")}}},[a("h2",[t._v("Додаткова інформація")]),a("i",{staticClass:"panel-btn"})]),a("div",{staticClass:"panel__content"},[a("table",[a("tr",[a("td",[t._v("Тип квитка:")]),a("td",[t._v("Всього:")]),t._l(t.tableInf.colors,(function(t,e){return a("td",{key:e},[a("span",{style:{"border-color":t}})])}))],2),a("tr",[a("td",[t._v("Ціна квитка:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.prices)))]),t._v(" грн")]),t._l(t.tableInf.prices,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))]),t._v(" грн\n              ")])}))],2),a("tr",[a("td",[t._v("Квота, шт.")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.quantity)))])]),t._l(t.tableInf.quantity,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2),a("tr",[a("td",[t._v("Квота на суму")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.quantityOfSum)))])]),t._l(t.tableInf.quantityOfSum,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2),a("tr",[a("td",[t._v("Запрошення, шт")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.invitations)))])]),t._l(t.tableInf.invitations,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2),a("tr",[a("td",[t._v("Запрошення на суму")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.invitationsOfSum)))])]),t._l(t.tableInf.invitationsOfSum,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2),a("tr",[a("td",[t._v("Продано, шт")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.solded)))])]),t._l(t.tableInf.solded,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2),a("tr",[a("td",[t._v("Продано на суму")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.soldedOfSum)))])]),t._l(t.tableInf.soldedOfSum,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2),a("tr",[a("td",[t._v("Заброньовано, шт")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.reserved)))])]),t._l(t.tableInf.reserved,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2),a("tr",[a("td",[t._v("Заброньовано на суму")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.reservedOfSum)))])]),t._l(t.tableInf.reservedOfSum,(function(e,n){return a("td",{key:n},[a("b",[t._v(t._s(e))])])}))],2)])])]),t.isGeneral?a("div",{staticClass:"panel"},[a("div",{ref:"general-panel",staticClass:"panel__title",on:{click:function(e){return e.preventDefault(),t.togglePannel("general-panel")}}},[a("h2",[t._v("Загальна інформація")]),a("i",{staticClass:"panel-btn"})]),a("div",{staticClass:"panel__content"},[a("table",[a("tr",[a("td",[t._v("Всього квитків:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.quantity)))])]),a("td",[t._v("На суму:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.quantityOfSum)))])])]),a("tr",[a("td",[t._v("Доступно квитків:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.quantity)-t.totalOf(t.tableInf.solded)))])]),a("td",[t._v("На суму:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.quantityOfSum)-t.totalOf(t.tableInf.soldedOfSum)))])])]),a("tr",[a("td",[t._v("Заброньовано:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.reserved)))])]),a("td",[t._v("На суму:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.reservedOfSum)))])])]),a("tr",[a("td",[t._v("Продано:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.solded)))])]),a("td",[t._v("На суму:")]),a("td",[a("b",[t._v(t._s(t.totalOf(t.tableInf.soldedOfSum)))])])])])])]):t._e()])]):t._e()],1)},i=[],s=(a("28a5"),a("06db"),a("6b54"),a("9191")),r=0,o={name:"EventDetails",components:{"general-sine-chart":function(){return a.e(8).then(a.bind(null,"127a"))},"total-soulds":function(){return a.e(1).then(a.bind(null,"603b"))}},data:function(){return{points:[],eventTitle:"",eventCity:"",eventConcertHall:"",eventDate:"",eventTime:"",eventOrganisator:"",strokeDashArray:2*Math.PI*80,tableKey:"table-before-update",currentCurrency:0,currentQuantity:0,totalCurrency:0,totalQuantity:0,totalCurrencyPercents:0,totalQuantityPercents:0,activeTabIndex:0,cLength:160*Math.PI,showChart:!1,detailInf:[{cash_register:{id:"cash_register",val:0,percents:0},invitations:{id:"invitations",val:0,percents:0},reserved:{id:"reserved",val:0,percents:0},online:{id:"online",val:0,percents:0},offline:{id:"offline",val:0,percents:0}},{cash_register:{id:"cash_register",val:0,percents:0},invitations:{id:"invitations",val:0,percents:0},reserved:{id:"reserved",val:0,percents:0},online:{id:"online",val:0,percents:0},offline:{id:"offline",val:0,percents:0}}],tableInf:{colors:[],prices:[],quantity:[],quantityOfSum:[],invitations:[],invitationsOfSum:[],solded:[],soldedOfSum:[],reserved:[],reservedOfSum:[]},details:null,idOfEvent:void 0}},beforeUpdate:function(){r=0},mounted:function(){var t=this;this.$store.dispatch("fetchingData",{isFetching:!0}),this.eventTitle=this.$route.params.title,this.eventCity=this.$route.params.city,this.eventConcertHall=this.$route.params.concertHall,this.eventDate=this.$route.params.date,this.eventTime=this.$route.params.time,this.eventOrganisator=this.$route.params.organisator,this.idOfEvent=this.$route.params.eventId;var e=null,a=new Date,n=a.getDate()<10?"0"+a.getDate():a.getDate(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1;"true"===this.$route.params.isToday&&(e={dateFrom:a.getFullYear()+"-"+i+"-"+n+"T00:00:00",dateTo:a.getFullYear()+"-"+i+"-"+n+"T23:59:59"}),this.$axios({methods:"get",url:s["f"]+"/"+this.idOfEvent,params:e,headers:{Authorization:"Bearer  "+this.$store.getters.getAccessToken}}).then((function(r){t.currentCurrency=r.data.allTicketSum,t.totalCurrency=r.data.allTicketSum+r.data.notSoldTicketSum,t.totalCurrencyPercents=(100*+t.currentCurrency/+t.totalCurrency).toFixed(2),t.detailInf[0].offline.val=r.data.offlineTicketSum,t.detailInf[0].offline.percents=isNaN((100*+r.data.offlineTicketSum/+t.currentCurrency).toFixed(2))?0:(100*+r.data.offlineTicketSum/+t.currentCurrency).toFixed(2),t.detailInf[0].online.val=r.data.onlineTicketSum,t.detailInf[0].online.percents=isNaN((100*+r.data.onlineTicketSum/+t.currentCurrency).toFixed(2))?0:(100*+r.data.onlineTicketSum/+t.currentCurrency).toFixed(2),t.detailInf[0].invitations.val=r.data.inviteTicketSum,t.detailInf[0].invitations.percents=isNaN((100*+r.data.inviteTicketSum/+t.currentCurrency).toFixed(2))?0:(100*+r.data.inviteTicketSum/+t.currentCurrency).toFixed(2),t.detailInf[0].reserved.val=r.data.bookedTicketSum,t.detailInf[0].reserved.percents=isNaN((100*+r.data.bookedTicketSum/+t.currentCurrency).toFixed(2))?0:(100*+r.data.bookedTicketSum/+t.currentCurrency).toFixed(2),t.detailInf[0].cash_register.val=r.data.hardLockedTicketSum,t.detailInf[0].cash_register.percents=isNaN((100*+r.data.hardLockedTicketSum/+t.currentCurrency).toFixed(2))?0:(100*+r.data.hardLockedTicketSum/+t.currentCurrency).toFixed(2),t.$axios({methods:"get",url:s["e"]+"/"+t.idOfEvent,params:e,headers:{Authorization:"Bearer  "+t.$store.getters.getAccessToken}}).then((function(r){"true"===t.$route.params.isToday?t.currentQuantity=r.data.allBoughtTicketCount:t.currentQuantity=r.data.allTicketCount-r.data.notSoldTicketCount,t.totalQuantity=r.data.allTicketCount,t.totalQuantityPercents=(100*t.currentQuantity/t.totalQuantity).toFixed(2),t.detailInf[1].offline.val=r.data.offlineTicketCount,t.detailInf[1].offline.percents=(100*r.data.offlineTicketCount/t.currentQuantity).toFixed(2),t.detailInf[1].online.val=r.data.onlineTicketCount,t.detailInf[1].online.percents=(100*r.data.onlineTicketCount/t.currentQuantity).toFixed(2),t.detailInf[1].invitations.val=r.data.inviteTicketCount,t.detailInf[1].invitations.percents=(100*r.data.inviteTicketCount/t.currentQuantity).toFixed(2),t.detailInf[1].reserved.val=r.data.bookedTicketCount,t.detailInf[1].reserved.percents=(100*r.data.bookedTicketCount/t.currentQuantity).toFixed(2),t.detailInf[1].cash_register.val=r.data.hardLockedTicketCount,t.detailInf[1].cash_register.percents=(100*r.data.hardLockedTicketCount/t.currentQuantity).toFixed(2),t.isGeneral?t.$axios({methods:"get",url:s["g"]+"/"+t.idOfEvent,headers:{Authorization:"Bearer  "+t.$store.getters.getAccessToken}}).then((function(r){t.points=[];for(var o=0;o<r.data.length;o++){var l=t.getDate(r.data.length-o);t.points.push({x:l,y:r.data[o].soldTicketsMoney})}e={dateFrom:a.getFullYear()+"-"+i+"-"+n+"T00:00:00",dateTo:a.getFullYear()+"-"+i+"-"+n+"T23:59:59"},t.$axios({methods:"get",url:s["f"]+"/"+t.idOfEvent,params:{dateFrom:e.dateFrom,dateTo:e.dateTo,eventId:t.eventId},headers:{Authorization:"Bearer  "+t.$store.getters.getAccessToken}}).then((function(e){var a=t.getDate(0);t.points.push({x:a,y:e.data.allTicketSum}),t.$store.dispatch("fetchingData",{isFetching:!1}),t.showChart=!0}))})):(t.$store.dispatch("fetchingData",{isFetching:!1}),t.showChart=!0)}))})),this.$axios({methods:"get",url:s["d"]+"/"+this.idOfEvent,params:e,headers:{Authorization:"Bearer  "+this.$store.getters.getAccessToken}}).then((function(e){t.tableInf.colors=[],t.tableInf.quantityOfSum=[],t.tableInf.prices=[],t.tableInf.quantity=[],t.tableInf.invitations=[],t.tableInf.invitationsOfSum=[],t.tableInf.reserved=[],t.tableInf.reservedOfSum=[],t.tableInf.soldedOfSum=[],t.tableInf.solded=[];for(var a=0;a<e.data.length;a++)t.tableInf.colors.push(e.data[a].color),t.tableInf.invitations.push(+e.data[a].inviteTickets),t.tableInf.invitationsOfSum.push(+e.data[a].inviteTickets*+e.data[a].price),t.tableInf.reserved.push(+e.data[a].bookedTickets),t.tableInf.reservedOfSum.push(+e.data[a].bookedTickets*+e.data[a].price),t.tableInf.solded.push(+e.data[a].soldTickets),t.tableInf.soldedOfSum.push(+e.data[a].soldTickets*+e.data[a].price);t.$axios({methods:"get",url:s["c"]+"/"+t.idOfEvent,headers:{Authorization:"Bearer  "+t.$store.getters.getAccessToken}}).then((function(e){for(var a=0;a<e.data.length;a++)t.tableInf.quantityOfSum.push(+e.data[a].availableTickets*+e.data[a].price),t.tableInf.prices.push(+e.data[a].price),t.tableInf.quantity.push(+e.data[a].availableTickets)}))}))},computed:{isGeneral:function(){var t=!1;return"true"===this.$route.params.isGeneral&&(t=!0),t},showDetails:function(){return this.$store.getters.isDetailsShow}},methods:{markerClick:function(t){var e=this,a=t.split(".")[0],n=t.split(".")[1],i="20"+t.split(".")[2];this.$axios({methods:"get",url:s["f"]+"/"+this.idOfEvent,params:{dateFrom:i+"-"+n+"-"+a+"T00:00:00",dateTo:i+"-"+n+"-"+a+"T23:59:59"},headers:{Authorization:"Bearer  "+this.$store.getters.getAccessToken}}).then((function(t){e.details=t.data}))},getDate:function(t){var e=new Date,a=new Date(e.setDate(e.getDate()-t)),n=a.getFullYear().toString(),i=""+n[2]+n[3],s=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,r=a.getDate()<10?"0"+a.getDate():a.getDate();return"".concat(r,".").concat(s,".").concat(i)},totalOf:function(t){for(var e=0,a=0;a<t.length;a++)e+=t[a];return e},changeActiveTab:function(t){r=0,this.activeTabIndex=t},cOffset:function(t){return this.cLength+5-t*this.cLength/100},rotateInAngle:function(t){var e=0;return r>0&&(e=360*r/100),r+=+t,e},goBack:function(){this.$router.go(-1)},togglePannel:function(t){this.$refs[t].classList.contains("active")?this.$refs[t].classList.remove("active"):this.$refs[t].classList.add("active")}},filters:{thousant:function(t){for(var e=t.toString().split("").reverse(),a=0;a<e.length;a++)(a+1)%3===0&&a<e.length-1&&(e[a+1]+=" ");return e.reverse().join("")}}},l=o,c=(a("cad1"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,null,null);e["default"]=d.exports},cad1:function(t,e,a){"use strict";var n=a("cdf5"),i=a.n(n);i.a},cdf5:function(t,e,a){}}]);